{
  "data" : {
    "model" : {
      "columnNameMatching" : "CASE_SENSITIVE",
      "missingColumnHandling" : "FAIL",
      "additionalColumnsHandling" : "REJECT",
      "dataTypeHandling" : "FAIL",
      "columnNames" : [ "StringCol", "IntCol", "DoubleCol" ],
      "missingValueHandling" : "IGNORE",
      "categoricDomainHandling" : "IGNORE",
      "numericDomainHandling" : "IGNORE",
      "validationFailureBehavior" : "FAIL_NODE"
    }
  },
  "schema" : {
    "type" : "object",
    "properties" : {
      "model" : {
        "type" : "object",
        "properties" : {
          "additionalColumnsHandling" : {
            "oneOf" : [ {
              "const" : "REJECT",
              "title" : "Fail validation"
            }, {
              "const" : "REMOVE",
              "title" : "Remove"
            }, {
              "const" : "IGNORE",
              "title" : "Move to end"
            } ],
            "title" : "If there is an additional column in the table",
            "description" : "Specifies how to handle columns which are not included in the reference table but in the table to validate.\nAdditional columns can cause the validation to fail, be removed, or moved to the end of the table.\n\n<ul>\n<li><b>Fail validation</b>: Additional columns will cause the validation to fail</li>\n<li><b>Remove</b>: Additional columns will be removed</li>\n<li><b>Move to end</b>: Additional columns will be moved to the end of the table</li>\n</ul>",
            "default" : "REJECT"
          },
          "categoricDomainHandling" : {
            "oneOf" : [ {
              "const" : "IGNORE",
              "title" : "Ignore"
            }, {
              "const" : "FAIL",
              "title" : "Fail validation"
            }, {
              "const" : "MISSING_VALUE",
              "title" : "Replace with missing values"
            } ],
            "title" : "If categoric value is not in the domain",
            "description" : "Allows one to optionally validate categoric values in columns against a set of allowed values.\nThis option is only enabled if the reference column defines possible values.\n\n<ul>\n<li><b>Ignore</b>: Categoric values are not validated</li>\n<li><b>Fail validation</b>: Fails validation if values are not in the domain of the reference column</li>\n<li><b>Replace with missing values</b>: Replaces out-of-domain values with missing values</li>\n</ul>",
            "default" : "IGNORE"
          },
          "columnNameMatching" : {
            "oneOf" : [ {
              "const" : "CASE_SENSITIVE",
              "title" : "Case sensitive"
            }, {
              "const" : "CASE_INSENSITIVE",
              "title" : "Case insensitive"
            } ],
            "title" : "Column name matching",
            "description" : "Controls what counts as a column name match between the input table and the reference table.\nIf 'case insensitive' is choosen, it still tries to find an exactly (case sensitively) matching column\nname first, and then falls back to case insensitive matching.\n\n<ul>\n<li><b>Case sensitive</b>: Column names must match exactly</li>\n<li><b>Case insensitive</b>: Also columns with a similar name will be considered to be validated according to this configuration.\n</li>\n</ul>",
            "default" : "CASE_SENSITIVE"
          },
          "columnNames" : {
            "type" : "array",
            "items" : {
              "type" : "string"
            },
            "default" : [ "StringCol", "IntCol", "DoubleCol" ]
          },
          "dataTypeHandling" : {
            "oneOf" : [ {
              "const" : "NONE",
              "title" : "Ignore"
            }, {
              "const" : "FAIL",
              "title" : "Fail validation"
            }, {
              "const" : "CONVERT_FAIL",
              "title" : "Try to convert"
            } ],
            "title" : "If data type does not match",
            "description" : "Ensures a correct data type.\n<ul>\n<li><b>Ignore</b>: Ignores data type mismatches and do nothing</li>\n<li><b>Fail validation</b>: Fails the validation if reference data type is not a super type of the data type to validate\n</li>\n<li><b>Try to convert</b>: Attempts conversion and fails the validation if not possible</li>\n</ul>",
            "default" : "FAIL"
          },
          "missingColumnHandling" : {
            "oneOf" : [ {
              "const" : "NONE",
              "title" : "Ignore"
            }, {
              "const" : "FAIL",
              "title" : "Fail validation"
            }, {
              "const" : "FILL_WITH_MISSINGS",
              "title" : "Insert column with missing values"
            } ],
            "title" : "If a column is missing in the table",
            "description" : "Ensures that the reference columns exist in the input table.\nIf case insensitive name matching is selected, the first matching column will satisfy this condition.\n\n<ul>\n<li><b>Ignore</b>: Ignore missing columns and do nothing</li>\n<li><b>Fail validation</b>: Fails the validation if columns don't exist</li>\n<li><b>Insert column with missing values</b>: Inserts missing columns and fills them with missing values</li>\n</ul>",
            "default" : "FAIL"
          },
          "missingValueHandling" : {
            "oneOf" : [ {
              "const" : "IGNORE",
              "title" : "Ignore"
            }, {
              "const" : "FAIL",
              "title" : "Fail validation"
            } ],
            "title" : "If there are missing values",
            "description" : "Validation fails if any of the columns contains missing values.\n<ul>\n<li><b>Ignore</b>: Missing values in columns are ignored</li>\n<li><b>Fail validation</b>: Fails the validation if a column contains missing values</li>\n</ul>",
            "default" : "IGNORE"
          },
          "numericDomainHandling" : {
            "oneOf" : [ {
              "const" : "IGNORE",
              "title" : "Ignore"
            }, {
              "const" : "FAIL",
              "title" : "Fail validation"
            }, {
              "const" : "MISSING_VALUE",
              "title" : "Replace with missing values"
            } ],
            "title" : "If numeric value is outside the domain",
            "description" : "Checks if each data object is between min and max defined by the domain of the reference column.\nThis option is only enabled if the reference column defines a numeric domain (min/max).\n\n<ul>\n<li><b>Ignore</b>: Numeric values are not validated</li>\n<li><b>Fail validation</b>: Fails validation if numeric values are outside domain (min/max)</li>\n<li><b>Replace with missing values</b>: Replaces out-of-domain values with missing values</li>\n</ul>",
            "default" : "IGNORE"
          },
          "validationFailureBehavior" : {
            "oneOf" : [ {
              "const" : "FAIL_NODE",
              "title" : "Fail node"
            }, {
              "const" : "OUTPUT_TO_PORT_CHECK_DATA",
              "title" : "Deactivate first output port"
            } ],
            "title" : "If validation fails",
            "description" : "Controls the effect of a failed validation.\n<ul>\n<li><b>Fail node</b>: Forces the node to fail if the validation fails, with detailed validation fault descriptions.\nThere data validation will be skipped if the structure validation already fails.\n</li>\n<li><b>Deactivate first output port</b>: Never fails but deactivates first output port if the validation fails and outputs\nresults at the second port. It will always do both, structure and data validation.\n</li>\n</ul>",
            "default" : "FAIL_NODE"
          }
        }
      }
    }
  },
  "ui_schema" : {
    "elements" : [ {
      "label" : "Structure Validation",
      "type" : "Section",
      "elements" : [ {
        "type" : "Control",
        "scope" : "#/properties/model/properties/columnNameMatching",
        "options" : {
          "format" : "valueSwitch"
        }
      }, {
        "type" : "Control",
        "scope" : "#/properties/model/properties/missingColumnHandling",
        "options" : {
          "format" : "radio",
          "radioLayout" : "vertical"
        }
      }, {
        "type" : "Control",
        "scope" : "#/properties/model/properties/additionalColumnsHandling",
        "options" : {
          "format" : "valueSwitch"
        }
      }, {
        "type" : "Control",
        "scope" : "#/properties/model/properties/dataTypeHandling",
        "options" : {
          "format" : "valueSwitch"
        }
      } ]
    }, {
      "label" : "Data Validation",
      "type" : "Section",
      "elements" : [ {
        "type" : "Control",
        "scope" : "#/properties/model/properties/missingValueHandling",
        "options" : {
          "format" : "valueSwitch"
        }
      }, {
        "type" : "Control",
        "scope" : "#/properties/model/properties/categoricDomainHandling",
        "options" : {
          "format" : "radio",
          "radioLayout" : "vertical"
        },
        "rule" : {
          "effect" : "ENABLE",
          "condition" : {
            "schema" : {
              "not" : { }
            }
          }
        }
      }, {
        "type" : "Control",
        "scope" : "#/properties/model/properties/numericDomainHandling",
        "options" : {
          "format" : "radio",
          "radioLayout" : "vertical"
        },
        "rule" : {
          "effect" : "ENABLE",
          "condition" : {
            "schema" : {
              "not" : { }
            }
          }
        }
      } ]
    }, {
      "label" : "Output",
      "type" : "Section",
      "elements" : [ {
        "type" : "Control",
        "scope" : "#/properties/model/properties/validationFailureBehavior",
        "options" : {
          "format" : "valueSwitch"
        }
      } ]
    } ]
  },
  "persist" : {
    "type" : "object",
    "properties" : {
      "model" : {
        "type" : "object",
        "properties" : {
          "columnNameMatching" : {
            "configPaths" : [ [ "case_insensitive_name_matching" ] ],
            "route" : [ "individual_settings", "0" ]
          },
          "missingColumnHandling" : {
            "configKey" : "colum_missing_handling",
            "route" : [ "individual_settings", "0" ]
          },
          "additionalColumnsHandling" : {
            "configKey" : "unkown_columns_handling"
          },
          "dataTypeHandling" : {
            "configKey" : "datatype_handling",
            "route" : [ "individual_settings", "0" ]
          },
          "columnNames" : {
            "configKey" : "column_names",
            "route" : [ "individual_settings", "0" ]
          },
          "missingValueHandling" : {
            "configPaths" : [ [ "reject_on_missing_value" ] ],
            "route" : [ "individual_settings", "0" ]
          },
          "categoricDomainHandling" : {
            "configPaths" : [ [ "domain_handling_possible_values" ] ],
            "route" : [ "individual_settings", "0" ]
          },
          "numericDomainHandling" : {
            "configPaths" : [ [ "domain_handling_min_max" ] ],
            "route" : [ "individual_settings", "0" ]
          },
          "validationFailureBehavior" : {
            "configKey" : "rejecting_behavior"
          }
        }
      }
    }
  }
}