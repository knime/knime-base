{
  "data" : {
    "model" : {
      "fileChooser" : {
        "file" : {
          "path" : {
            "fsCategory" : "LOCAL",
            "path" : "",
            "timeout" : 10000,
            "context" : {
              "fsToString" : "(LOCAL, )"
            }
          }
        },
        "createMissingFolders" : false,
        "overwritePolicy" : "overwrite"
      },
      "imageColumn" : "",
      "removeImageColumn" : false,
      "fileNaming" : {
        "generateFileNames" : true,
        "fileNamePattern" : "File_?",
        "fileNameColumn" : {
          "regularChoice" : ""
        }
      }
    }
  },
  "schema" : {
    "type" : "object",
    "properties" : {
      "model" : {
        "type" : "object",
        "properties" : {
          "fileChooser" : {
            "type" : "object",
            "properties" : {
              "createMissingFolders" : {
                "type" : "boolean",
                "title" : "Create missing folders",
                "description" : "If enabled, missing folders in the output path will be created automatically. If disabled, the node will fail if any folder in the path does not exist.",
                "default" : false
              },
              "file" : {
                "type" : "object",
                "properties" : {
                  "path" : {
                    "type" : "object",
                    "default" : {
                      "fsCategory" : "LOCAL",
                      "path" : "",
                      "timeout" : 10000,
                      "context" : {
                        "fsToString" : "(LOCAL, )"
                      }
                    }
                  }
                },
                "title" : "Folder",
                "description" : "Select a folder where the image files will be stored. You can specify the file system and path.",
                "default" : {
                  "path" : {
                    "fsCategory" : "LOCAL",
                    "path" : "",
                    "timeout" : 10000,
                    "context" : {
                      "fsToString" : "(LOCAL, )"
                    }
                  }
                }
              },
              "overwritePolicy" : {
                "oneOf" : [ {
                  "const" : "fail",
                  "title" : "Fail"
                }, {
                  "const" : "overwrite",
                  "title" : "Overwrite"
                }, {
                  "const" : "ignore",
                  "title" : "Ignore"
                }, {
                  "const" : "append",
                  "title" : "Append"
                } ],
                "title" : "If exists",
                "description" : "Specify the behavior of the node in case the output file already exists.<ul><li><b>Fail</b>: Will issue an error during the node's execution (to prevent unintentional overwrite).</li><li><b>Overwrite</b>: Will replace any existing file.</li><li><b>Ignore</b>: Will ignore if a file already exists and continues the copying process.</li></ul>",
                "default" : "overwrite"
              }
            },
            "default" : {
              "file" : {
                "path" : {
                  "fsCategory" : "LOCAL",
                  "path" : "",
                  "timeout" : 10000,
                  "context" : {
                    "fsToString" : "(LOCAL, )"
                  }
                }
              },
              "createMissingFolders" : false,
              "overwritePolicy" : "overwrite"
            }
          },
          "fileNaming" : {
            "type" : "object",
            "properties" : {
              "fileNameColumn" : {
                "type" : "object",
                "properties" : {
                  "regularChoice" : {
                    "type" : "string"
                  },
                  "specialChoice" : {
                    "oneOf" : [ {
                      "const" : "ROW_ID",
                      "title" : "RowID"
                    } ]
                  }
                },
                "title" : "File name column",
                "description" : "Select the column containing the file names for the output images, or select RowID to use row IDs as file names. The file extension will be determined automatically and should not be included in the column values.",
                "default" : {
                  "regularChoice" : ""
                }
              },
              "fileNamePattern" : {
                "type" : "string",
                "title" : "File name pattern",
                "description" : "The file names will be generated using the provided pattern. The pattern must contain a single \"?\" symbol. This symbol will, during execution, be replaced by an incrementing counter to make the filenames unique. The file extension will be detected automatically and must not be specified.",
                "default" : "File_?"
              },
              "generateFileNames" : {
                "type" : "boolean",
                "title" : "Generate file names",
                "description" : "If enabled, file names will be generated using a pattern with an auto-incrementing counter. If disabled, file names will be taken from a column in the input table.",
                "default" : true
              }
            },
            "default" : {
              "generateFileNames" : true,
              "fileNamePattern" : "File_?",
              "fileNameColumn" : {
                "regularChoice" : ""
              }
            }
          },
          "imageColumn" : {
            "type" : "string",
            "title" : "Image column",
            "description" : "Select the column containing the images to write to files.",
            "default" : ""
          },
          "removeImageColumn" : {
            "type" : "boolean",
            "title" : "Remove image column",
            "description" : "If enabled, the image column will be excluded from the output table.",
            "default" : false
          }
        }
      }
    }
  },
  "ui_schema" : {
    "elements" : [ {
      "type" : "Control",
      "scope" : "#/properties/model/properties/fileChooser/properties/file",
      "options" : {
        "fileSystems" : [ "LOCAL", "SPACE", "EMBEDDED", "CONNECTED", "CUSTOM_URL" ],
        "isLocal" : true,
        "isWriter" : true,
        "selectionMode" : "FOLDER",
        "spaceFSOptions" : {
          "mountId" : "Local space"
        },
        "format" : "fileChooser"
      }
    }, {
      "type" : "Control",
      "scope" : "#/properties/model/properties/fileChooser/properties/createMissingFolders",
      "options" : {
        "format" : "checkbox"
      }
    }, {
      "type" : "Control",
      "scope" : "#/properties/model/properties/fileChooser/properties/overwritePolicy",
      "options" : {
        "format" : "valueSwitch"
      },
      "providedOptions" : [ "possibleValues" ]
    }, {
      "label" : "Image",
      "type" : "Section",
      "elements" : [ {
        "type" : "Control",
        "scope" : "#/properties/model/properties/imageColumn",
        "options" : {
          "format" : "dropDown"
        },
        "providedOptions" : [ "possibleValues" ]
      }, {
        "type" : "Control",
        "scope" : "#/properties/model/properties/removeImageColumn",
        "options" : {
          "format" : "checkbox"
        }
      } ]
    }, {
      "label" : "File names",
      "type" : "Section",
      "elements" : [ {
        "type" : "Control",
        "scope" : "#/properties/model/properties/fileNaming/properties/generateFileNames",
        "options" : {
          "format" : "checkbox"
        }
      }, {
        "type" : "Control",
        "scope" : "#/properties/model/properties/fileNaming/properties/fileNamePattern",
        "rule" : {
          "effect" : "SHOW",
          "condition" : {
            "scope" : "#/properties/model/properties/fileNaming/properties/generateFileNames",
            "schema" : {
              "const" : true
            }
          }
        }
      }, {
        "type" : "Control",
        "scope" : "#/properties/model/properties/fileNaming/properties/fileNameColumn",
        "options" : {
          "format" : "singleSelection",
          "specialChoices" : [ {
            "id" : "ROW_ID",
            "text" : "RowID"
          } ]
        },
        "providedOptions" : [ "possibleValues" ],
        "rule" : {
          "effect" : "HIDE",
          "condition" : {
            "scope" : "#/properties/model/properties/fileNaming/properties/generateFileNames",
            "schema" : {
              "const" : true
            }
          }
        }
      } ]
    } ]
  },
  "persist" : {
    "type" : "object",
    "properties" : {
      "model" : {
        "type" : "object",
        "properties" : {
          "fileChooser" : {
            "type" : "object",
            "properties" : {
              "file" : {
                "configPaths" : [ [ "path" ] ]
              },
              "createMissingFolders" : {
                "configKey" : "create_missing_folders"
              },
              "overwritePolicy" : {
                "configKey" : "if_path_exists"
              }
            },
            "configKey" : "output_location"
          },
          "imageColumn" : {
            "configKey" : "image_column"
          },
          "removeImageColumn" : {
            "configKey" : "remove_image_column"
          },
          "fileNaming" : {
            "configPaths" : [ [ "generate_file_names" ], [ "filename_pattern" ], [ "filename_column" ] ]
          }
        }
      }
    }
  },
  "initialUpdates" : [ {
    "scope" : "#/properties/model/properties/fileChooser/properties/overwritePolicy",
    "providedOptionName" : "possibleValues",
    "values" : [ {
      "indices" : [ ],
      "value" : [ {
        "id" : "fail",
        "text" : "Fail"
      }, {
        "id" : "overwrite",
        "text" : "Overwrite"
      }, {
        "id" : "ignore",
        "text" : "Ignore"
      } ]
    } ]
  }, {
    "scope" : "#/properties/model/properties/fileNaming/properties/fileNameColumn",
    "providedOptionName" : "possibleValues",
    "values" : [ {
      "indices" : [ ],
      "value" : [ {
        "id" : "RowID",
        "text" : "RowID",
        "type" : {
          "id" : "org.knime.core.data.StringValue",
          "text" : "String"
        }
      } ]
    } ]
  }, {
    "scope" : "#/properties/model/properties/imageColumn",
    "providedOptionName" : "possibleValues",
    "values" : [ {
      "indices" : [ ],
      "value" : [ {
        "id" : "Image",
        "text" : "Image",
        "type" : {
          "id" : "org.knime.core.data.image.png.PNGImageValue",
          "text" : "Image (PNG)"
        }
      } ]
    } ]
  } ]
}